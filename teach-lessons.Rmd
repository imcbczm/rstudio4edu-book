# Lessons 

```{r, include = FALSE}
source("common.R")
```

Structure this section around (a) presentation, and (b) content; not on tools

where do you start? We don't think that should depend on the presentation. Whether you are developing an online tutorial, a workshop, or an academic course, you'll probably start with a schedule and a content outline. Most educators we know rely on a variety of tools at this stage, ranging from plain text editors to Google docs. Some start with R Markdown.

We won't provide specific tools recommendations for this stage, because there is really no right or wrong way to start- the most important thing is that you find a way to plan out loud *somewhere*.

No matter where you start though, at some point, if you'll be teaching R or teaching *with* R, you'll need R Markdown.

And at some point, probably sooner rather than later, you'll need GitHub. (provide bit of a pep talk here: You are more than your teaching materials. here are some things you can get out of putting your edu materials on GitHub.

Once you've gotten as far as using GitHub, you are _thisclose_ to also publishing your content with a shareable link. This, to us, is a critical step. Why do it? First for you. Second for learners. Third for the community. Fourth for your career and network.


present some sort of typology of lessons

Code

- read only 

- hands on (may be static or interactive0)

Narrative


- Code leads; narrative supports. The narrative follows or explains real-world code. This type of lesson may show a coding workflow, or a code worked example for "How to do X with Y"

- A story or a question drives the narrative; code supports. This will usually be a worked example or a series of. The narrative is writtento


## A very brief history {#history}

The concept of ["literate programming"](https://en.wikipedia.org/wiki/Literate_programming) was originally introduced by [Donald Knuth](http://www.literateprogramming.com/knuthweb.pdf) in 1992. In a nutshell, Knuth envisioned a new programming paradigm where computer scientists focus on weaving code together with text with the aim of creating programs as *"works of literature."*  

> Let us change our traditional attitude to the construction of programs: Instead  of imagining that our main task is to instruct a computer what to do, let us concentrate rather on explaining to humans what we want the computer to do.
>
> &mdash; Donald E. Knuth, Literate Programming, 1984

Knuth coined this new paradigm the `WEB` system, which you have probably never heard of! Probably the most impactful outcome from Knuth's original idea was inspiring software developers to not only change their own mindset, but to create tools to enable others to write literate programs. And a huge next step was to enable users to write their narratives in a markup language made for authoring  (such as [Markdown](https://daringfireball.net/projects/markdown/) or $LaTeX$), where it became easier and ultimately natural to use real words in full sentences instead of just code comments. 

The most fully-featured tool for literate programming in the R ecosystem is [R Markdown](https://rmarkdown.rstudio.com/). 

The idea of applying literate programming to teaching is not new. But, we think that opening up literate programming toolkits for educators with specific use cases may be new- in our experience, the actual application of using literate programming tools.

> "There is no telling what will happen if lots of other people catch `WEB` fever and start foisting their creations on each other."


## Literate lessons {#lit-edu}

> "~~Programming~~ *Teaching* is a very personal activity, so I canâ€™t be certain that what has worked for me will work for everybody."
>
> &mdash; Donald E. Knuth, Literate Programming, 1984 (edited by the authors)

Permission to educators who teach R or teach with R to consider themselves literate programmers. You are programming a lesson, however you end up delivering it. You could deliver a lesson any number of ways, but you are a literate programmer. For any given lesson, here are some "inputs" that you need to design around:

+ __Audience:__ who are your learners?

+ __Time:__ who long do you have with the learners? If you won't meet them in person (i.e., you are designing a ), this is trickier- you need to think about how long you can reasonably have their attention for.

+ __Scope:__ what are your learning objectives?

+ __Sequencing:__ in what order can you cover the things you need to meet your learners' goals?

:::hat
If you would like pedagogical advice for how to plug in these inputs, and get a lesson out, there are many ways to get there but we recommend following [Greg Wilson's](http://third-bit.com/) advice for [*A Lesson Design Process*](https://teachtogether.tech/#s:process), from his book [__Teaching Tech Together__](https://teachtogether.tech).
:::



## Knit to HTML

<center>![](images/illos/Knit-to-html.jpg){width=60%}</center>


The [R Markdown package](https://rmarkdown.rstudio.com/docs/) has a number of built-in ["output formats"](https://rmarkdown.rstudio.com/docs/reference/index.html#section-output-formats), which means that a single .Rmd document can be "knit" into a bunch of different output file types like HTML, PDF, and even Word documents.

For educators, we strongly encourage using the default HTML output format for three reasons:

1. __Shareability__- HTML output can be easily shared with links, especially if you are using GitHub.

1. __Flexibility__- .Rmd files output to HTML can be organized easily into larger educational projects using R Markdown extension packages like `bookdown` and `blogdown` (see later chapters).

1. __Styleability__- Each R Markdown output format has its own output styling options. The [options](https://rmarkdown.rstudio.com/docs/reference/html_document.html) for the HTML output format are by far the most fully featured and easily accessible, relying on no additional software installation.

1. __Customizability__- All HTML output can be further customized using CSS. The bad news is that you will need to learn a bit about CSS to get there (see our crash course), but the good news is that if you are the kind of educator that needs to, for example, use a specific branded style guide that specifies colors, fonts, etc., you *can* make your HTML output look "on brand" with a custom CSS.

## R Markdown in practice

examples:

+ https://bbc.github.io/rcookbook/


## R Markdown Workflows

+ Using RStudio projects (why)
    + in RStudio, from git adds .gitignore for you
    + try alfred app: https://twitter.com/hadleywickham/status/968624630276804608?lang=en



## Design for teaching

The aesthetic design of your lessons can make the difference between learners ...

### Formatting text

All plain text (that is, text that is not code) is formatted using markdown. Markdown is...

### Formatting code

All code in an R Markdown document is processed by the `knitr` package. Code is entered in one of two ways:

+ Code chunks ()
+ Inline code so `r `

The way that code chunks appear in your output are controlled by [`knitr` chunk options](https://yihui.name/knitr/options/). These options give you extremely granular control over your code chunk output, but there are a few key patterns of code chunk options that are especially useful in the education context.

High-level important ideas:

#### Know the defaults

Print them here

make a table with cols- pattern / why / chunk option(s):
- show results / hide code --> `echo=FALSE`
- show code / hide results --> `results='hide'`
- show code / hide plots --> `fig.show='hide'`
- hide everything --> `include=FALSE`

```{r}
library(tidyverse)
library(kableExtra)
chunks <- tribble(~pattern, ~use, ~option, 
                      "show results / hide code", "teach concepts, not code", "`echo=FALSE`",
                      "show code / hide results", "teach code", "`results='hide'`", 
                      "show code / hide plots", "teach code", "`fig.show='hide'`",
                      "hide everything", "use code for ", "`include=FALSE`")

chunks %>%
  kable("html", escape = FALSE) %>% 
  kable_styling(bootstrap_options = c("hover", "condensed")) 
```

1. know the default chunk options
1. know how to use a setup chunk to change those for the whole document
1. know that you can also just override for individual chunks

Maybe include a table




## Sample Rmds

```{r render-lab, include=FALSE}
demo_rmd <- here::here("static/moma-lab.Rmd")
demo_html <- here::here("static/moma-lab.html")
rerender_demo <- if (file.exists(demo_rmd) & file.exists(demo_html)) {
  file.info(demo_rmd)$mtime > file.info(demo_html)$mtime
} else TRUE
if (rerender_demo) {
  #callr::r(function(x) rmarkdown::render(x), args = list(demo_rmd))
  rmarkdown::render(demo_rmd)
}
```

[MoMA lab](static/moma-lab.html)
<div class="iframe-container" style="height: 50vh;">
<iframe width="1024" height="768" src="static/moma-lab.html" style="-webkit-transform:scale(0.75);-moz-transform-scale(0.75);"></iframe>
</div>

```{r render-workshop, include=FALSE}
demo_rmd <- here::here("static/nhanes-workshop.Rmd")
demo_html <- here::here("static/nhanes-workshop.html")
rerender_demo <- if (file.exists(demo_rmd) & file.exists(demo_html)) {
  file.info(demo_rmd)$mtime > file.info(demo_html)$mtime
} else TRUE
if (rerender_demo) {
  #callr::r(function(x) rmarkdown::render(x), args = list(demo_rmd))
  rmarkdown::render(demo_rmd)
}
```

[NHANES workshop](static/nhanes-workshop.html)
<div class="iframe-container" style="height: 50vh;">
<iframe width="1024" height="768" src="static/nhanes-workshop.html" style="-webkit-transform:scale(0.75);-moz-transform-scale(0.75);"></iframe>
</div>


## Sharing 



### Share source code

+ first, know the knitr code chunk options, and remember about code folding.

+ GitHub to view source (but not very readable, see next section)

- [ ] [code download](https://rmarkdown-docs.netlify.com/reference/html_document.html)

### Share readable output

+ .R -> GitHub

  ```yaml
  #' ---
  #' output: github_document
  #' ---
  ```

  + https://github.com/apreshill/teachthat/blob/master/gather/make-data-to-gather.R
  
What if you just want to keep things really simple? Try github_document as the output of a regular R script. This will create an `.md` version of whatever code and output you have, and it will be rendered in a nice, readable way without you having to mess with GitHub pages or HTML directly, etc. See an example of what I mean below:

[Start with .R script...](https://github.com/apreshill/teachthat/blob/master/gather/make-data-to-gather.R) and [...end with a GitHub document](https://github.com/apreshill/teachthat/blob/master/gather/make-data-to-gather.md)

```{r, echo = FALSE}
side_by_side("images/gather-R.png",50,"images/gather-gitdoc.png", 50)
```


+ Rmd -> GitHub

   + https://rmarkdown.rstudio.com/docs/reference/github_document.html
   + https://github.com/jennybc/lotr-tidy

+ GitHub + ghpages

Can also export to pdf as attachments
      
   
## Troubleshooting

[Mine's troubleshooting tips:](https://mine-cetinkaya-rundel.github.io/teach-data-sci-icots2018/01-03-rmarkdown/01-03-rmarkdown.html#30)



+ Make sure RStudio and the rmarkdown package (and its dependencies) are up-to-date.

+ Set a global option for error = TRUE (or for a given chunk) so that your document renders even when there are errors.

+ Donâ€™t try to change working directory within an R Markdown document. (If you do still decide to use setwd in a code chunk, beware that the new working directory will only apply to that specific code chunk, and any following code chunks will revert back to use the original working directory.)

Also see: 

+ https://rmd4sci.njtierney.com/common-problems-with-rmarkdown-and-some-solutions.html
+ https://happygitwithr.com/rmd-test-drive.html#rmd-troubleshooting
+ switch latex engines (do a screenshot here)
+ consider printing out your `sessionInfo()` [for pro-level, use DT]

```{r results="hide"}
DT::datatable(devtools::session_info()$packages)
```

## Lesson delivery & sharing

When it comes to presenting your lesson, here are some things to consider and tool recommendations for different lesson delivery methods.

### Live coding

+ Start with R Markdown
+ Disable all custom RStudio color themes and fonts
+ Keycastr

### Screencast

+ getkap, Quicktime
+ Start with R Markdown
+ Keycastr
+ web hosting

### Online tutorials

+ web hosting
+ html widgets like plotly, highchartr, etc.
+ learnr tutorials
