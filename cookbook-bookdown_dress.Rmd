# Dress it up! {#book-dress}

<center>![](images/illos/Dressup-book.jpg){width=40%}</center>

```{r include = FALSE}
# remotes::install_github("r-lib/ymlthis")
library(ymlthis)
library(dplyr)
```

In this section, we cover optional ways to make your bookdown site look `r emo::ji ("sparkles")`faaaabulous `r emo::ji ("sparkles")`. The features we cover below do not require knowing CSS nor HTML, and they're all built-in things you can add to your bookdown now. There are a lot of different options here, and you certainly don't have to implement all of them. Take an Ã  la carte approach and pick the stuff you like!

In general, you can think of these as being useful for the following categories:

<!--http://www.tablesgenerator.com/markdown_tables#-->

<div class = side-by-side>

<div style="width: 50%; padding-right: 15px;">
#### Getting edits and sharing {-}
| WHAT                                      | WHERE                       	|
|-------------------------------------------|-----------------------------	|
| Add an edit link                        	| `_output.yml`               	|
| Make the page downloadable as an `.Rmd` 	| `_output.yml`               	|
| Link to your GitHub in the toolbar      	| `_output.yml` & `index.Rmd` 	|
| Add other sharing links                 	| `_output.yml`               	|
| Add a favicon                           	| `index.Rmd`                 	|
| Book cover and description              	| `index.Rmd`                 	|  
</div>

<div>

#### Organizing your TOC {-}

| WHAT                          	| WHERE             	|
|-------------------------------	|-------------------	|
| Header and footer of your TOC 	| `_output.yml`     	|
| Group chapters into parts     	| Within any `.Rmd` 	|
| Add an appendix               	| Within any `.Rmd` 	|
| Collapse                      	| `_output.yml`     	|

</div>


</div>

<div class = "side-by-side">

<div style="width: 50%; padding-right: 15px;">
#### Numbering and naming {-}
| WHAT                    	| WHERE             	|
|-------------------------	|-------------------	|
| Section (un)numbering   	| Within any `.Rmd` 	|
| Change the chapter name 	| `_bookdown.yml`   	|  
</div>

<div>
#### Aesthetics {-}
| WHAT                    	| WHERE             	|
|-------------------------	|-------------------	|
| Code highlighting       	| `_output.yml` 	    |  
</div>

</div>


## `index.Rmd`

The `index.Rmd` is the only `.Rmd` in the book with its own YAML. We're going to modify ours from the default skeleton to have a few new fields. We explain each of the new fields below.

```{r, echo = FALSE}
library(ymlthis)
    ymlthis::yml_empty() %>%
          yml_title("A Minimal Book Example") %>%
          yml_author("Yihui Xie") %>%
          yml_date("08/09/2019") %>%
          yml_bookdown_site() %>%
          yml_toplevel(documentclass = "book") %>%
          yml_citations(c("book.bib", "packages.bib"), link_citations = TRUE) %>%
          yml_toplevel("biblio-style" = "apalike") %>% 
          yml_toplevel(description = "A work in progress.") %>% 
          yml_site_opts(favicon = "images/favicon.ico") %>%
          yml_toplevel("cover-image" = "images/logo-black.png") %>%
          yml_toplevel("github-repo" = "your-github/your-repo") %>%
          yml_toplevel("url" = "https://github.com/dcossyleon/fake_book") %>%
          asis_yaml_output(fences = TRUE)
```

### Add a favicon
You know the little tiny icon that gets placed in the corner of your browser tab? That's a favicon! It's also the icon that shows up when you've bookmarked a page.

1. **Create a folder called `images`** in your project directory. You don't technically *have to* create this folder, but you will [thank us later](#book-organized) as you add more images to your book. 
1. **Save the image you'd like to use** (for best results it should be square) in `images/`.
    * Don't have an image? Make one in less than a minute with text or an emoji:
        1. Go to [free favicon generator](https://favicon.io/) and create a favicon
        2. Download and move the `.ico` file into your `images/`.
1. **Open** `index.Rmd`.
1. **Add** `favicon: <"images/favicon.ico">` in the YAML, replacing the filepath in quotes with your own.

:::tip
**Note**: In the example above, we can use ICO files (with the `.ico` extension) which are preferred because of better rendering across most browsers, but other images types like PNGs work too. 
:::

### Book cover, description, and GitHub link

* **`cover-image:`** This lets you set an image that will act as your book's cover. Since we're making a bookdown website, the cover will really only be useful to us when we share a link of our book. It's the image that will show as a preview in a link. 
* **`description:`** This is the short blurb that will also be part of the preview when your share the link of your book. 
* **`github-repo`:** By filling out this field with your own username and repo name, you've completed one of the two steps to create a link to your book's repo in the toolbar of your book. Step two involves adding the `sharing:` field in the `_output.yml` with `github: yes` included. See the `_output.yml` section to see how we completed that step.

Let's update our `index.Rmd` with the following: 

* **Update the description** of our demo book to say "A work in progress."
* **Add a cover image** by adding a path to our logo (or a url to any other image, you can try one of [these](https://unsplash.com/)) and use that for now. 
* **Add your GitHub username and repo** and then don't forget to go your `_output.yml` to turn on the sharing icons.
* Now is also a good time to update your `Title` and `Author` fields if you haven't already. 

## In any `.Rmd` file

These built-in features don't require changing any YAMLs. You can apply them to any `.Rmd` file where you want to see the changes. 

### Turn off section numbering
By default bookdown will number each of the headings in your book. If you don't want this, then within any `.Rmd` you can:

* Add an `{-}` after each heading you want unnumbered .
* If your section has an ID within brackets already, just add the `-` in front, for example: `## My Section {-#section-id}` 

:::design
We recommend keeping the numbering on for all of your chapters, except for the headings in your `index.Rmd`, which you should use as your preface or introduction. 
:::

Let's remove numbering for the initial chapter of our minimal book, to make it clear it's a preface:

* Open `index.Rmd`.
* Change the level one header to be ` # Prerequisites {-}`
* Save and build your book.
* Notice that once you do, the numbering of all the following sections is automatically adjusted. 

### Group chapters into parts {#book-parts}
If you have a bunch of chapters, it can be helpful to group some of them together (e.g., by semester, quarter, or content themes). You can create a book part within any `.Rmd` file. To do this: 

* On a line at the top of your `.Rmd` file, create a header that begins with `(PART)` followed by your part title and a `{-}`. For example, `# (PART) First Semester {-}`. 

* If you don't want your part to be numbered with a Roman numeral, then you must instead write: `(PART\*) First Semester {-}`

Let's create two unnumbered parts for our demo book:

* Open the `01-intro.Rmd` file and add `# (PART\*) First Semester {-}` as the first line. 
* Open `04-methods.Rmd` file and `# (PART\*) Second Semester {-}` as the first line. 

### Appendix {#book-appendix}
Similar to ["Parts"](#book-parts), you can create an appendix for your book with a header like this `# (APPENDIX) Appendix {-}`. Any level one headers that come after the appendix header will be in your appendix and will be numbered with letters. See more [here](https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html#special-headers).

Let's create an appendix for our demo book by making a new `.Rmd`.

1. In the IDE, **create a fresh `.Rmd`** by going to *File* > *New File* > *R Markdown*.
1. **Delete everything** in this file.
1. **Add your appendix header** at the top `# (APPENDIX) Appendix {-}`. Optionally, some appendix chapters and content, like so:

    ```appendix.Rmd
    # (APPENDIX) Appendix {-} 

    # Appendix A
    Here is the first appendix chapter.

    # Appendix B
    Here is the second appendix chapter.
    ```
1. **Save** this file in your project directory. 
1. **Open `_bookdown.yml`** and **add** this `.Rmd` to the end of your list of `.Rmds`.

## `_bookdown.yml`

We've previously used `_bookdown.yml` to set the order of our chapters. 

```{r, echo = FALSE}
library(ymlthis)
    ymlthis::yml_empty() %>%
          yml_bookdown_opts(book_filename = "fake-book",
                            output_dir = "docs",
                            delete_merged_file = TRUE,
                            rmd_files = list(
                              html = c("index.Rmd", 
                                        "01-intro.Rmd",
                                         "04-application.Rmd",
                                         "02-literature.Rmd", 
                                         "03-method.Rmd", 
                                         "05-summary.Rmd", 
                                         "06-references.Rmd"))) %>%
          yml_toplevel(language = list(list(ui = list(chapter_name = "Chapter ")))) %>%
          yml_toplevel(new_session = 'yes') %>%
          asis_yaml_output(fences = FALSE)
```

### Chapter names

* **`chapter_name`**: This is option that determines whether your level one headers will say "Chapter 1" or "Section 1" or "Module 1"---whatever prefix you'd like. In our example demo book, we'll leave this as `"Chapter "`, but if you wanted to change it, you would do this:

1. **Open `_bookdown.yml`**.
1. **Replace `"Chapter "` with your prefix of choice**. Don't forget the space after the name within the quotes.


## `_output.yml`

The remaining built-in features are all specified from `_output.yml`. We'll make some change to our `_output.yml` so that it looks like the one below. See below where we explain the options in more detail. 

<!--TODO replace with ymlthis -->

```_output.yml
bookdown::gitbook:
  highlight: tango
  css: style.css
  config:
    toc:
      before: |
        <li><a href="./">A Minimal Book Example</a></li>
      after: |
        <li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
    download: ["rmd"]
    edit:
      link: https://github.com/dcossyleon/fake_book/edit/master/%s
      text: "Suggest an edit"
    sharing:
      github: yes
      facebook: no
      twitter: yes
      all: no
bookdown::pdf_book:
  includes:
    in_header: preamble.tex
  latex_engine: xelatex
  citation_package: natbib
  keep_tex: yes
bookdown::epub_book: default
```
### Highlight
* **`highlight`**: first up is the styling of your code output. Highlight styles work the same as they would in an RMD site. The options here are `default`, `tango`, `pygments`, `kate`, `monochrome`, `espresso`, `zenburn`, and `haddock`.

Let's try it:

1. **Open `_output.yml`**
1. **Add the `highlight:` field and choose `tango`.

### Table of Contents (TOC)
* The toc `before:` and `after:` options are the **header and footer of your TOC**. There's a little bit of HTML on these lines, but don't let that scare you. 
  * In the **`before:`** field, you can replace `Minimal Book Example` to be a new header. Usually this is text. Sometimes it's a logo, but for that you'll have to stop by the [Make it Fancy](#book-fancy), since it involves a bit more HTML/CSS. 
  * The **`after:`** field is for the TOC footer. This is fine to leave as-is for now.
* **`collapse`:** This controls whether your TOC will show all sections or subsections by default. If you have very deep heading and section hierarchies, then you might feel compelled to play around with this. You can read more about it in the [bookdown documentation](https://bookdown.org/yihui/bookdown/html.html#gitbook-style).

Let's make the following changes:

1. **Open `_output.yml`**
1. Create a new TOC header with the `before:` option by **replacing the `"A Minimal Book Example"`** with **`"Demo Book"`** intstead.

### Edits, download, and icons

* **`edit`**: This adds an edit link in your toolbar so that collaborators can click to edit the `.Rmd` for the current page on GitHub. In the url for this link, there should be an `%s` where the actual `.Rmd` filename for each page will go. The `text:` option that goes along with it is the text your user will see if they hover over the edit icon long enough. 
 
* **`download:`** When the argument is set to `["rmd"]`, then when your user clicks on the download icon, a new tab will open that shows them the `.Rmd` code used to generate the page they're viewing (this won't work if you don't have an `edit:` field). This isn't technically a download, but still useful. Without specifying this option at all, bookdown will look for other versions of your book (like PDFs or EPUB) to provide as a download. If you don't want this, then you need to set `download: no`. 

* **`sharing`:** When you turn sharing on, it's easier for people to give your book a shoutout on twitter or find their way to your repo. This is good! We suggest using only these sharing icons and disabling the rest with `all: no`. Setting `github: yes` here is just one of the steps you need for the GitHub link to work. You also have to add your GitHub account and repo name to the `index.Rmd` YAML as we described above. 


Let's make the following changes:

1. **Open `_output.yml`**
1. **Allow edits from collaborators:**
    * Add an **`edit:`** field, a **`link:`** field, and a **`text`:**.
    * Add the url to your GitHub repo in the `link:` field, followed by `/edit/master/%s`, like so: `https://github.com/rstudio4edu/rstudio4edu-book/edit/master/%s`.
    * Add a message to the text field. Something like `"suggest an edit"`. 
1. **Allow `.Rmd` download.**
    * Remove the download option for PDF and EPUB
    * Replace this with `["rmd"]`.
    * Make sure you also have done the `edit:` step above.
1. **Add sharing icons**.
    * Add a sharing field and set `github: yes`, `facebook: no`, `twitter: yes`, `all: no`.
    * Mind your indentation (remember, YAMLS are fussy!)
    * Make sure you've already added your GitHub info in `index.Rmd`'s YAML.

\

Alright, we've done all we can here with bookdown's built-in options. Time to checkout the options in [Make it fancy](#book-fancy) if you're still wanting more customization.


